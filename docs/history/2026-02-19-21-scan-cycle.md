# History: The February 2026 Scan Cycle

**Dates**: 2026-02-19 to 2026-02-21  
**Outcome**: 172 beads closed, 7 repos scanned, system-wide error handling improved

---

## What Happened

### Day 1 (Feb 19): Setup and First Wave

**Evening session** created 25 beads across 8 subsystems. Strategy was PRDs first, then Opus-generated roadmaps (125 tasks extracted), then bead creation. Nine PRDs written.

First overnight dispatch attempted. Cron jobs scheduled for 02:00 and 05:00 EET.

**Beads dispatched**: 10 Codex agents via `relay spawn`. Most succeeded in 2-5 minutes. One failed (athena-086, duration 100s, reason unknown from logs).

### Day 2 (Feb 20): The Bead Blitz

**Morning**: Discovered Learning Loop cron wasn't installed and TEMPLATES_DIR path was wrong. Fixed these as quick wins.

**Midday**: Dispatched 8+ agents in parallel across chrote (home server, 24GB RAM). Used both Claude Code (claude-*) and Codex (codex-*) tmux sessions.

**Truthsayer scan** of `/home/chrote/athena/tools/` (7 repos, beads excluded):
- Total findings: **1616**
- Scan time: ~1 second
- Files: 248

**First instinct was wrong**: Agents initially wanted to fix everything. Decision made to categorize first:
- `REAL-BUGS.md` — things that actually need fixing
- `FALSE-POSITIVES.md` — scanner noise
- `UNCERTAIN.md` — needs human judgment

### The Categorization

| Category | Count | What it was |
|----------|-------|-------------|
| `unreachable-code` in tests | 798 | Test fixtures, false positives |
| `hidden-failure-bash` | 163 | Mix of intentional patterns and real bugs |
| `unvalidated-env-bash` | 102 | Configuration patterns, disputed |
| `unwrapped-error` (Go) | 166 | Wrapping style question, not bugs |
| `sql-injection` in tests | 12 | Intentional test fixtures |
| `hardcoded-credentials` in tests | 11 | Intentional test fixtures |
| Actual error handling bugs | ~59 | Real issues |

### Multi-Reviewer Experiment

Sent UNCERTAIN.md to both Opus and Codex for independent review.

**They disagreed:**

| Rule | Opus Assessment | Codex Assessment |
|------|-----------------|------------------|
| `unvalidated-env-bash` | 0% real bugs | 20% real bugs |
| `unwrapped-error` | 10% actionable | 45% actionable |
| `hidden-failure-bash` | 5% real bugs | 1% real bugs (2 specific) |

Codex identified specific bugs Opus missed:
- `truthsayer/scripts/judge.sh:125` — JSON parse failure silently dropped
- `truthsayer/scripts/judge.sh:148` — fallback to `[]` can produce false clean result

Opus was more aggressive about labeling things as noise. Codex found edge cases in the noise.

### What Got Fixed

Created 12 beads for the real work:
- 5 beads for error handling fixes (59 bugs across relay, oathkeeper, learning-loop, workspace scripts)
- 6 beads for uncertain reviews (closed after Opus/Codex analysis)
- 1 bead for categorization work

All merged via Centurion test gate.

### Day 3 (Feb 21): Cleanup

All beads closed. Final state: 0 errors in all 7 repos.

`.truthsayer.toml` config deployed to all repos to suppress test file noise permanently.

---

## Raw Numbers

- Beads created total: 172
- Beads closed: 172
- Open beads at end: 0
- Average lead time: 11.4 hours
- Parallel agents running: 8+
- Agent failures: at least 1 (athena-086)
- Repos with errors before: 7
- Repos with errors after: 0
- Real bugs found: 59
- False positives identified: 821+
- Human review time: ~30 min (categorization + reviewer analysis)

---

## Decisions Made

### 1. Categorize before fixing
Don't blindly fix scanner output. Most findings (97% in this case) were noise.

### 2. Multi-reviewer for uncertainty
When findings are ambiguous, run 2+ models. Disagreements are data.

### 3. Config before code
`.truthsayer.toml` exclusions eliminated 821 false positives. Should have done this first.

### 4. Test files are special
`*_test.go`, `testdata/`, and test directories generate most scanner noise. Exclude by default.

### 5. PRD → Roadmap → Beads
Strategy layer (Opus) thinks before execution layer (Codex/dispatch) acts.

---

## Things That Went Wrong

1. **Scanner rules need tuning**: `unvalidated-env-bash` generated 102 findings with disputed value. Either 0% or 20% signal depending on who reviewed it.

2. **One bead failed** (athena-086) with no clear cause in logs. Retry succeeded.

3. **TEMPLATES_DIR path was wrong** in learning-loop scripts. Quick fix but shouldn't have shipped broken.

4. **Centurion missing Go PATH**: Script failed until `export PATH="/usr/local/go/bin:$HOME/go/bin:$PATH"` added.

5. **First instinct was to fix everything**: Would have wasted hours on 821 false positives.

---

## What Was Shipped

- **Relay**: `spawn`, `watch`, `inbox` commands
- **Centurion**: Truthsayer integration in test gate
- **Learning Loop**: Cron installed (hourly scoring, daily refinement, weekly reports)
- **All repos**: Error handling bugs fixed, FP config deployed
- **Senate**: First verdict rendered (Truthsayer rule amendment)

---

## Artifacts

| Path | Contents |
|------|----------|
| `state/scans/REAL-BUGS.md` | 59 actual bugs with locations |
| `state/scans/FALSE-POSITIVES.md` | 821+ false positive patterns |
| `state/scans/UNCERTAIN.md` | 431 findings needing judgment |
| `state/scans/UNCERTAIN-REVIEW-OPUS.md` | Opus analysis |
| `state/scans/UNCERTAIN-REVIEW-CODEX.md` | Codex analysis |
| `state/scans/FP-STRATEGY.md` | Config approach |
| `state/scans/SCAN-LEARNINGS.md` | Process learnings |
| `state/scans/tools-20260220.json` | Raw scan output (2.2MB) |
| `memory/2026-02-20.md` | Day 2 session notes |
| `memory/2026-02-20-overnight.md` | Overnight build session |
| `memory/2026-02-19-overnight.md` | Day 1 setup |

---

## Open Questions

1. **Should `unvalidated-env-bash` be disabled?** Opus says yes (0% signal). Codex found 20 cases worth validating. Disagreement unresolved.

2. **Error wrapping boundary**: Where exactly should Go code wrap errors? Codex says "exported functions only." Needs style guide entry.

3. **Truthsayer rule refinement**: Several rules could be narrowed (distinguish tests, check for `%w`, etc.). No PR submitted yet.

---

*Written 2026-02-21. This is ground truth, not retrospective spin.*
